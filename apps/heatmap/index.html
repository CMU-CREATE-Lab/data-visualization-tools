<!doctype html>
<html>
  <head>
    <title>04.html</title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css">

    <link type="text/css" rel="stylesheet/less" href="style.less" />

    <script type="text/javascript" src="../../js/less-1.6.2.min.js"></script>
    <script type="text/javascript" src="../../js/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="../../js/bootstrap.min.js"></script>

    <script src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script src="../../js/CanvasLayer.js"></script>
    <script type="text/javascript" src="../../js/base.js"></script>
    <script type="text/javascript" src="../../js/io.js"></script>
    <script type="text/javascript" src="../../js/stats.min.js"></script>

    <script type="text/javascript" src="../../js/utils.js"></script>

    <script id="pointVertexShader" type="x-shader/x-vertex">
      attribute vec4 worldCoord;
      attribute vec4 color;
      attribute float magnitude;
      attribute float aPointSize;

      attribute float time;
      uniform float startTime;
      uniform float endTime;

      uniform mat4 mapMatrix;
      varying vec4 baseColor;

      void main() {
        if (time < startTime || time > endTime) {
gl_Position = vec4(-100, -100, -100, -100);
        } else {

        // transform world coordinate by matrix uniform variable
        gl_Position = mapMatrix * worldCoord;
}

        // a constant size for points, regardless of zoom level
        gl_PointSize = aPointSize * magnitude;

        baseColor = color;
      }      
    </script>
    <script id="pointFragmentShader" type="x-shader/x-fragment">
      precision mediump float;

      varying vec4 baseColor;

      void main() {
        float dist = length(gl_PointCoord.xy - vec2(.5, .5));
        dist = 1. - (dist * 2.);
        dist = max(0., dist);

        gl_FragColor = baseColor * dist;
      }
    </script>
    <script type="text/javascript" src="sliders.js"></script>
    <script type="text/javascript" src="heatmap.js"></script>
  </head>
  <body>
    <div id="loading"><table><tr><td><div class='message'>Loading data. Please wait...<br></div><img src="../../img/Ajax-loader.gif"></td></tr></table></div>
    <div id="map-div"></div>

    <div class="control vertical" style="right: 27px; top: 130px;">
      <div title="Increase time window" class="plus">
        <img src="mapcontrols.png" draggable="false">
      </div>
      <div class="bar">
        <img src="mapcontrols.png" draggable="false">
      </div>
      <div title="Decrease time window" class="minus">
        <img src="mapcontrols.png" draggable="false">
      </div>
      <div title="Drag to change time window size" class="handle">
        <img src="mapcontrols.png" draggable="false">
      </div>
      <input type="hidden" value="15" data-min="0" data-max="29" id="offset-slider">
    </div>

    <div class="control horizontal" style="left: 100px; bottom: 3px;">
      <div title="Earlier" class="minus">
        <img src="mapcontrols.png" draggable="false">
      </div>
      <div class="bar">
        <img src="mapcontrols.png" draggable="false">
      </div>
      <div title="Later" class="plus">
        <img src="mapcontrols.png" draggable="false">
      </div>
      <div title="Drag to change date" class="handle">
        <img src="mapcontrols.png" draggable="false">
      </div>
      <input type="hidden" value="0" data-min="0" data-max="0" id="day-slider">
    </div>

    <div id="current-date" style="position: absolute; left: 420px; bottom: 7px; color: white;"></div>

    <div id="current-offset" style="position: absolute; right: 18px; top: 106px; color: white;"></div>

    <button name="animate-button" id="animate-button" class="btn btn-xs" style="position: absolute; left: 73px; bottom: 6px; background: white;"><input type="hidden"><i class="glyphicon glyphicon-pause"></i></button>

  </body>
</html>
