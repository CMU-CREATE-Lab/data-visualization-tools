<!DOCTYPE html>
<html lang="en">

<head>
  <title>EarthTime</title>
  <meta name="keywords" content="Earth Time,EarthTime,Earth Timelapse,EarthTimelapse,Global Situation Space,Climate">
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content="width=device-width, user-scalable=no" />

  <script src="https://js.sentry-cdn.com/a316bf13ca2f46dda7e3a86677bf38bd.min.js" crossorigin="anonymous"></script>

  <script>
  window.loadStartTime = new Date().getTime();
  </script>

  <link href="../../css/jquery-ui/smoothness/jquery-ui.custom.css" rel="stylesheet" type="text/css" />
  <link href="../../timemachine/css/snaplapse.css" rel="stylesheet" type="text/css" />
  <link href="../../timemachine/css/defaultUI.css" rel="stylesheet" type="text/css" />
  <link href="../../timemachine/css/scaleBar.css" rel="stylesheet" type="text/css" />
  <link href="../../timemachine/css/customUI.css" rel="stylesheet" type="text/css" />
  <link href="../../timemachine/libs/change-detect/css/change.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="../../js/customVideoTagControls/customVideoTagControls.css" rel="stylesheet" type="text/css" />
  <link href="index.css" rel="stylesheet" type="text/css" />
  <link href="legend.css" rel="stylesheet" type="text/css" />
  <link href="Wizard.css" rel="stylesheet" type="text/css" />
  <link href="StoryEditor.css" rel="stylesheet" type="text/css" />
  <link href="SetViewTool.css" rel="stylesheet" type="text/css" />
  <link href="date-range.css" rel="stylesheet" type="text/css" />
  <link href="altitude-slider.css" rel="stylesheet" type="text/css" />
  <link href='mapbox-gl-dev-patched/mapbox-gl_1.13.3.css' rel='stylesheet' />
  <link href="LayerEditor.css" rel="stylesheet" type="text/css" />

  <script src="../../timemachine/js/polyfills/touchpolyfill.min.js" type="text/javascript"></script>

  <script src="../../js/jquery/jquery.min.js" type="text/javascript"></script>
  <script src="../../js/jquery/jquery-migrate.min.js" type="text/javascript"></script>
  <script src="../../js/jquery/jquery-ui.custom.min.js" type="text/javascript"></script>
  <script src="../../js/jquery/jquery.json-editor.min.js" type="text/javascript"></script>
  <script src="../../js/jquery/jsrender.min.js" type="text/javascript"></script>
  <script src="../../timemachine/js/jquery/plugins/mouse/jquery.mousewheel.min.js" type="text/javascript"></script>

  <script src="../../timemachine/js/downloadjs/download.min.js"></script>

  <script src="../../timemachine/js/org/gigapan/util.js" type="text/javascript"></script>
  <script src="../../timemachine/js/org/gigapan/timelapse/videoset.js" type="text/javascript"></script>
  <script src="../../timemachine/js/org/gigapan/timelapse/parabolicMotion.js" type="text/javascript"></script>
  <script src="../../timemachine/js/org/gigapan/timelapse/timelapse.js" type="text/javascript"></script>
  <script src="../../timemachine/js/Math.uuid.js" type="text/javascript"></script>
  <script src="../../timemachine/js/org/gigapan/timelapse/snaplapse.js" type="text/javascript"></script>
  <script src="../../timemachine/js/org/gigapan/timelapse/snaplapseViewer.js" type="text/javascript"></script>
  <script src="../../timemachine/js/org/gigapan/timelapse/mercator.js" type="text/javascript"></script>
  <script src="../../timemachine/js/org/gigapan/timelapse/scaleBar.js" type="text/javascript"></script>
  <script src="../../timemachine/js/org/gigapan/timelapse/customUI.js" type="text/javascript"></script>
  <script src="../../timemachine/js/org/gigapan/timelapse/defaultUI.js" type="text/javascript"></script>
  <script src="../../timemachine/js/org/gigapan/timelapse/urlEncoder.js" type="text/javascript"></script>
  <script src="../../timemachine/template_includes.js" type="text/javascript"></script>

  <script src="../../timemachine/libs/change-detect/js/ThumbnailServiceAPI.js" type="text/javascript"></script>
  <script src="../../timemachine/libs/change-detect/js/TimeMachineCanvasLayer.js" type="text/javascript"></script>
  <script src="../../timemachine/libs/change-detect/js/ThumbnailTool.js" type="text/javascript"></script>
  <script src="../../timemachine/libs/change-detect/js/BoxEventHandler.js" type="text/javascript"></script>
  <script src="../../timemachine/libs/change-detect/js/ChangeDetectionTool.js" type="text/javascript"></script>

  <script src="../../timemachine/js/org/gigapan/postmessage.js" type="text/javascript"></script>
  <script src="../../timemachine/js/org/gigapan/timelapse/crossdomain_api.js" type="text/javascript"></script>

  <script src="../../js/customVideoTagControls/customVideoTagControls.js" type="text/javascript"></script>
  <script src="../../js/earcut.min.js" type="text/javascript"></script>
  <script src="../../js/dat.gui.min.js"></script>
  <script src="../../js/papaparse.min.js"></script>
  <script src="../../js/d3.min.js"></script>
  <script src="../../js/promise.min.js"></script>
  <script src="../../js/gl-matrix-min.js"></script>
  <script src="config-local.js" type="text/javascript"></script>
  <script src="../../../../config.js" type="text/javascript"></script>
  <script src="../../js/utils.js"></script>
  <script src="../../js/markdown-it.min.js"></script>

  <script src="timestamps_ajax_includes.js" type="text/javascript"></script>

  <script src="gapminder.json"></script>
  <script src="perf.js"></script>
  <script src="SetViewTool.js"></script>
  <script src="StoryEditor.js"></script>
  <script src="StoryEditorGoogleAPI.js"></script>

  <script src="../../js/canvasjs.min.js" type="text/javascript"></script>

  <script type="text/javascript" src="../../js/base.js"></script>
  <script type="text/javascript" src="../../js/io.js"></script>
  <script type="text/javascript" src="../../js/polyfills.js"></script>

  <script src="../../js/system.min.js"></script>

  <script>
    const origResolve = System.constructor.prototype.resolve

    System.constructor.prototype.resolve = function(moduleId, ...args) {
      var name = moduleId.substring(moduleId.lastIndexOf('/') + 1);
      var paths = {
        papaparse: '../../../../js/papaparse.min.js'
      };
      var path = paths[name] || (moduleId + '.js');
      //console.log('resolved ', moduleId, 'to', path);
      return origResolve.call(this, path, ...args);
    }
    System.import('./compiled/examples/webgl-timemachine/index');
  </script>

  <script>
    "use strict";

    if (typeof(trackingId) === 'undefined') {
      console.log('No ID; skipping GA');
    } else {
      // Google Analytics
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      // Write to local storage since cookies cannot be used on file://
      // allowLinker is for crossdomain (the tracking domain is different from where we are sending from)
      ga('create', trackingId, 'auto', {
        'allowLinker': true,
        'storage': 'none',
        'clientId': localStorage.getItem('gaClientId')
      });
      ga(function(t) {
        localStorage.setItem('gaClientId', t.get('clientId'));
      });
      ga('set', 'checkProtocolTask', null); // Disable file protocol checking.
      ga('send', 'pageview');
      // End Google Analytics
    }
  </script>
  <script>
    if (EARTH_TIMELAPSE_CONFIG && EARTH_TIMELAPSE_CONFIG["customCSSFile"]) {
      var ss = document.createElement("link");
      ss.rel = "stylesheet";
      ss.type = "text/css";
      ss.href = EARTH_TIMELAPSE_CONFIG["customCSSFile"];
      document.head.appendChild(ss);
    }
</script>
</head>

<body>
  <div id="viewerContainer">
    <div id="letterbox-content" class="unselectable">
      <div id="letterbox-main"></div>
      <div id="letterbox-bottom" class="no-pinch">
        <table id="letterbox-bottom-controls-container">
          <tr>
            <td id="letterbox-bottom-controls" width="14%">
              <!-- <div id="letterbox-base-layers"></div> -->
              <div id="letterbox-control-buttons">
                <button type="button" id="letterbox-list-themes-button">Themes</button>
                <button type="button" id="letterbox-list-layers-button">Layers</button>
                <button type="button" id="letterbox-clear-layers-button">Clear Layers</button>
              </div>
            </td>
            <td id="letterbox-bottom-picker" width="43%">
              <div id="letterbox-bottom-picker-content-wrapper">
                <div id="letterbox-bottom-picker-content">
                </div>
              </div>
            </td>
            <td id="letterbox-bottom-picker-results" width="43%">
              <div id="letterbox-bottom-picker-results-content-wrapper">
                <div id="letterbox-bottom-picker-results-content">
                </div>
              </div>
            </td>
          </tr>
        </table>
      </div>
    </div>
    <div id="timeMachine"></div>
    <div id="altitude-slider">
      <div></div>
    </div>
    <div id="datepicker-ui">
      <div id="datepicker-menu">
        <p id="date-range-inputs">
          <label>Start:</label>
          <input type="text" id="input1" placeholder="Start Date"><br>
          <label>End:</label>
          <input type="text" id="input2" placeholder="End Date">
        </p>
        <button class="ui-button ui-widget ui-corner-all" id="update-date-button">Refresh</button>
        <label id="lock-daterange"><input type="checkbox" id="lock-daterange-checkbox">Lock</label>
        <br>
        <div id="calendar" class="datepicker"></div>
      </div>
      <br>
      <button class="ui-button ui-widget ui-corner-all" id="calendar-button">Calendar</button>
    </div>
    <div class="annotations-resume-exit-container unselectable">
      <table>
        <tr>
          <td class="annotations-resume-button"><img class="annotations-resume-button-icon" src="../../images/return-light.png"><br>Resume Story</td>
          <td class="annotations-button-separator"></td>
          <td class="annotations-exit-button"><img class="annotations-exit-button-icon"  src="../../images/close-light.png"><br>Exit Story</td>
        </tr>
      </table>
    </div>
    <div class="current-location-text-container unselectable">
      <div class="previous-annotation-location annotation-nav" title="Previous slide"></div>
      <div class="current-location-text">
        <div class="current-location-text-toggle" title="Expand or collapse text"></div>
        <div class="current-location-text-title"></div>
        <div id="current-location-text-picture"></div>
        <p></p>
      </div>
      <div class="next-annotation-location annotation-nav" title="Next slide"></div>
    </div>
    <div id="extras-content-container" title=""></div>
    <div id="logosContainer" class="unselectable">
      <div id="earthTimeBranding">
        <div id="productLogo">EarthTime</div>
        <div id="contributors">CMU CREATE Lab</div>
      </div>
      <div id="mapboxLogoContainer"><img src="mapbox-logo-white.png"></div>
    </div>
    <div id="baseLayerCreditContainer" class="unselectable">
      <table>
        <tr>
          <td id="baselayerCreditHeader">Base Layer</td>
          <td id="baselayerCreditText">&copy; Google</td>
          <td id="baselayerCreditLogoContainer">
            <div id="baselayerCreditLogo"></div>
          </td>
        </tr>
      </table>
    </div>
    <div id="main-hamburger-menu" class="menu no-pinch">
      <ul>
        <li id="theme-menu" class="has-children">
          <label for="theme-selection" class="menu-selection-heading">Stories</label>
          <ul id="theme-list">
            <div class="themes-scroll-vertical">
              <div class="themes-div"></div>
            </div>
          </ul>
        </li>
        <li id="layers-menu" class="has-children">
          <label for="layer-selection" class="menu-selection-heading">Data Library</label>
          <div id="search-content">
            <span class="layer-search-box-icon"></span>
            <span id="layer-search-clear-icon" class="clear-search-icon" title="Clear layer search"></span>
            <input type="text" placeholder="Search for a layer..." id="layer-search-box">
          </div>
          <p id="layer-search-results-empty-msg">No layers found with that search criteria.</p>
          <div id="layer-search-results" class="layers-scroll-vertical"></div>
          <ul id="layers-list"></ul>
        </li>
      </ul>
    </div>
    <div id="presentation-slider-hamburger-wrapper">
      <div id="theme-title-container" title="Select a story">
        <div id="theme-title"></div>
      </div>
    </div>
    <div id="csvChartContainer" class="no-pinch"></div>
    <div id="csvChartLegend" class="no-pinch">
      <ul id="csvChartLegendList"></ul>
    </div>
    <div id="browser_not_supported">
      <div class="warning">Sorry, but it looks like your system is not currently supported by EarthTime.
        <br><br>At this time, we support systems with WebGL enabled and running recent desktop and mobile browser versions of
        <a href="http://www.google.com/chrome">Chrome</a>,
        <a href="http://www.apple.com/safari/">Safari</a>,
        <a href="http://www.firefox.com">Firefox</a> and
        <a href="http://windows.microsoft.com/en-us/internet-explorer/download-ie">Internet Explorer / Microsoft Edge</a>.
        <br><br>If you have questions, please email us at: <a href="mailto:earthtime@cmucreatelab.org?Subject=EarthTime%20Questions" target="_top">earthtime@cmucreatelab.org</a>
      </div>
    </div>
  </div>
  <div id="top-nav" class="unselectable">
    <ul id="top-nav-wrapper">
      <div id='menu-icon'></div>
      <li id='menu-logo'>EarthTime</li>
      <li id='stories-menu-choice' title="Select a story" class="menu-option">Stories</li>
      <li id='layers-menu-choice' title="Select data to visualize" class="menu-option">Data Library</li>
    </ul>
  </div>
  <div id="sidePanel"></div>
</body>

</html>
