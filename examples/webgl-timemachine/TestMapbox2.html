<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>TestMapbox2</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
<script src="mapbox/mapbox-gl-dev-patched-1.11.1.js"></script>
<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>
<link href="https://api.mapbox.com/mapbox-gl-js/v1.3.0/mapbox-gl.css" rel="stylesheet" />
<style>
	body { margin: 0; padding: 0; }
	.fullscreen { position: absolute; top: 0; bottom: 0; width: 100%; height: 100%}
</style>
</head>
<body>
<canvas id="map_canvas" class="fullscreen">
</canvas>
<div id="map" class="fullscreen">
</div>
<script>
  var canvas = document.getElementById('map_canvas');
  var gl = canvas.getContext('experimental-webgl',  {antialias: false, alpha: true, stencil: true, depth: true, failIfMajorPerformanceCaveat: false});
  window.gEarthTime = {glb: {gl:gl}};
  mapboxgl.accessToken = 'pk.eyJ1IjoicmFuZHlzYXJnZW50IiwiYSI6ImNrMDYzdGl3bDA3bTUzc3Fkb3o4cjc3YXgifQ.nn7FC9cpRl_THWpoAFnnow';
  var map = new mapboxgl.Map({
    container: 'map', // container id
      //style: 'mapbox://styles/randysargent/ckda4ka7x0u7n1inzx1hvzfei' // stylesheet location
      style: 'mapbox://styles/jjkoher/ck8ot8nj42p541inrndye698r'
  });
  function init() {
	$('#map_canvas').attr('width', $('#map_canvas').width() * window.devicePixelRatio);
	$('#map_canvas').attr('height', $('#map_canvas').height() * window.devicePixelRatio);
  }
  $(init);
 
  function redraw() {
	  console.log('redraw');
	  map._render(performance.now());
  }

  window.setInterval(redraw, 33);
</script>
 
</body>
</html>
